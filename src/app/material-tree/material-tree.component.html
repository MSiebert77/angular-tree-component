
<label>{{flatNodeMap.size}}</label><br>
<mat-tree
    cdkDropList
    #treeList="cdkDropList"
    [dataSource]="dataSource"
    [treeControl]="treeControl"
    >
    <mat-tree-node
        *matTreeNodeDef="let node;"
        matTreeNodePadding
        (dragover)="handleDragOver($event, node)"
        (dragend)="handleDragEnd($event)"
        (drop)="handleDrop($event, node)"
        [ngClass]="getStyle(node)"

    >
    <button
        mat-icon-button
        matTreeNodeToggle
        [attr.aria-label]="'toggle ' + node.item"
        *ngIf="node.expandable"
        >
        <mat-icon class="mat-icon-rtl-mirror">
            {{ treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}
        </mat-icon>
        </button>
            <div class="nodeContent" 
                (click)="activeNode = node;" 
                [ngClass]="{ 'highlight': activeNode === node, 'drag-start': dragNode === node }"
                [draggable]="true"
                (dragstart)="handleDragStart($event, node)"
            >
                {{ node.item }} <!-- (Parent: {{node.parentId}}, Id: {{ node.id }}) -->

            </div>
<!--            <div class="cdkDragPreview" *ngIf="this.dragNode == node">
                <img src="https://upload.wikimedia.org/wikipedia/en/3/32/Star_Wars_-_Episode_II_Attack_of_the_Clones_%28movie_poster%29.jpg">
            </div>-->
</mat-tree-node>
</mat-tree>